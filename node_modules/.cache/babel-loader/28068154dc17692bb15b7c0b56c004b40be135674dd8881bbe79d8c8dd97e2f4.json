{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\'NEO'\\\\Desktop\\\\tdp darbs\\\\Frontend\\\\frontend_dala\\\\src\\\\components\\\\forms\\\\inputs\\\\FormFileUpload.tsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { useField } from 'formik';\nimport { MdOutlineCreate, MdClear } from 'react-icons/md';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const FormFileUpload = props => {\n  _s();\n  const [field, meta, helpers] = useField(props);\n  // Extract the value from the field, value will be controlled manually\n  const {\n    value,\n    ...fieldNoValue\n  } = field;\n  const hiddenFileInput = useRef(null);\n  const [file, setFile] = useState('');\n  const imageAcceptTypes = ['image/png', 'image/jpeg', 'image/jpg'];\n  const getAcceptedFileTypes = () => {\n    if (props.acceptedFileTypes) {\n      return props.acceptedFileTypes.join(',');\n    } else if (props.image) {\n      return imageAcceptTypes.join(',');\n    }\n    return '';\n  };\n  const handleFileInputClick = () => {\n    if (hiddenFileInput.current) {\n      hiddenFileInput.current.click();\n    }\n  };\n  const handleFileInputChange = e => {\n    if (e.target.files) {\n      const file = e.target.files[0];\n      if (!file) return;\n      if (props.fileValidation) {\n        const validation = props.fileValidation(file);\n        if (validation !== true) {\n          helpers.setError(validation);\n          return;\n        }\n      }\n      helpers.setValue(file);\n      helpers.setError('');\n      const reader = new FileReader();\n      reader.onload = () => {\n        setFile(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const handleRemoveFile = () => {\n    setFile('');\n    helpers.setError('');\n    helpers.setValue('');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: props.containerClassName,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: props.labelClassName,\n      htmlFor: props.name,\n      children: [props.label, props.required && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-red-500 ml-0.5 text-sm\",\n        children: \"*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 36\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), props.customLook && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: handleFileInputClick,\n        className: `cursor-pointer w-${props.customSize || \"24\"} h-${props.customSize || \"24\"} bg-gray-200 rounded-lg flex items-center justify-center relative hover:bg-gray-300 transition duration-200`,\n        children: [file && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: file,\n          alt: \"preview\",\n          className: `w-${props.customSize || \"24\"} h-${props.customSize || \"24\"} rounded-lg object-cover`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 38\n        }, this), /*#__PURE__*/_jsxDEV(MdOutlineCreate, {\n          className: \"text-gray-700 absolute \" + (!file ? \"text-4xl top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\" : \"text-3xl top-1 right-1 bg-gray-200 rounded-full p-1 opacity-80\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this), file && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleRemoveFile,\n        type: \"button\",\n        className: \"-mt-1.5 text-sm flex flex-row items-center\",\n        children: [/*#__PURE__*/_jsxDEV(MdClear, {\n          className: \"text-red-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"pb-0.5\",\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(\"input\", {\n      ...fieldNoValue,\n      id: props.name,\n      name: props.name,\n      ref: hiddenFileInput,\n      type: \"file\",\n      accept: getAcceptedFileTypes(),\n      onChange: handleFileInputChange,\n      className: props.customLook ? \"hidden\" : props.inputClassName + \" \" + (meta.touched && meta.error ? \" border-red-500 focus:border-red-500 focus:ring-red-500\" : \" border-gray-400 focus:border-sky-500 focus:ring-sky-500\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), meta.error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-500 text-sm\",\n      children: meta.error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n_s(FormFileUpload, \"SulpcfjD06rRDQaN6lswYRmmUS8=\", false, function () {\n  return [useField];\n});\n_c = FormFileUpload;\nvar _c;\n$RefreshReg$(_c, \"FormFileUpload\");","map":{"version":3,"names":["React","useRef","useState","useField","MdOutlineCreate","MdClear","FormFileUpload","props","field","meta","helpers","value","fieldNoValue","hiddenFileInput","file","setFile","imageAcceptTypes","getAcceptedFileTypes","acceptedFileTypes","join","image","handleFileInputClick","current","click","handleFileInputChange","e","target","files","fileValidation","validation","setError","setValue","reader","FileReader","onload","result","readAsDataURL","handleRemoveFile","containerClassName","labelClassName","name","label","required","customLook","customSize","inputClassName","touched","error"],"sources":["C:/Users/'NEO'/Desktop/tdp darbs/Frontend/frontend_dala/src/components/forms/inputs/FormFileUpload.tsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport { useField } from 'formik';\r\nimport { MdOutlineCreate, MdClear } from 'react-icons/md';\r\n\r\nexport const FormFileUpload: React.FC<FileUploadProps> = (props) => {\r\n    const [field, meta, helpers] = useField(props);\r\n    // Extract the value from the field, value will be controlled manually\r\n    const {value, ...fieldNoValue} = field;\r\n    const hiddenFileInput = useRef<HTMLInputElement>(null);\r\n    const [file, setFile] = useState('');\r\n\r\n    const imageAcceptTypes = [\r\n        'image/png',\r\n        'image/jpeg',\r\n        'image/jpg',\r\n    ];\r\n\r\n    const getAcceptedFileTypes = () => {\r\n        if (props.acceptedFileTypes) {\r\n            return props.acceptedFileTypes.join(',');\r\n        } else if (props.image) {\r\n            return imageAcceptTypes.join(',');\r\n        }\r\n        return '';\r\n    }\r\n\r\n    const handleFileInputClick = () => {\r\n        if (hiddenFileInput.current) {\r\n            hiddenFileInput.current.click();\r\n        }\r\n    }\r\n\r\n    const handleFileInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files) {\r\n            const file = e.target.files[0];\r\n            if (!file) return;\r\n            if (props.fileValidation) {\r\n                const validation = props.fileValidation(file);\r\n                if (validation !== true) {\r\n                    helpers.setError(validation as string);\r\n                    return;\r\n                }\r\n            }\r\n            helpers.setValue(file);\r\n            helpers.setError('');\r\n            const reader = new FileReader();\r\n            reader.onload = () => {\r\n                setFile(reader.result as string);\r\n            }\r\n            reader.readAsDataURL(file);\r\n        }\r\n    }\r\n\r\n    const handleRemoveFile = () => {\r\n        setFile('');\r\n        helpers.setError('');\r\n        helpers.setValue('');\r\n    }\r\n\r\n    return (\r\n        <div className={props.containerClassName}>\r\n            <label\r\n                className={props.labelClassName}\r\n                htmlFor={props.name}\r\n            >\r\n                {props.label}\r\n                {props.required && <span className=\"text-red-500 ml-0.5 text-sm\">*</span>}\r\n            </label>\r\n            {props.customLook &&\r\n                <>\r\n                    <div\r\n                        onClick={handleFileInputClick}\r\n                        className={`cursor-pointer w-${props.customSize || \"24\"} h-${props.customSize || \"24\"} bg-gray-200 rounded-lg flex items-center justify-center relative hover:bg-gray-300 transition duration-200`}\r\n                    >\r\n                            {file && <img src={file} alt=\"preview\" className={`w-${props.customSize || \"24\"} h-${props.customSize || \"24\"} rounded-lg object-cover`} />}\r\n                            <MdOutlineCreate className={\"text-gray-700 absolute \"\r\n                                + (!file ? \"text-4xl top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"\r\n                                : \"text-3xl top-1 right-1 bg-gray-200 rounded-full p-1 opacity-80\")\r\n                            } />\r\n\r\n                    </div>\r\n                    { file &&\r\n                        <button onClick={handleRemoveFile} type=\"button\" className=\"-mt-1.5 text-sm flex flex-row items-center\">\r\n                            <MdClear className=\"text-red-500\" />\r\n                            <span className=\"pb-0.5\">Remove</span>\r\n                        </button>\r\n                    }\r\n                </>\r\n            }\r\n            <input\r\n                {...fieldNoValue}\r\n                id={props.name}\r\n                name={props.name}\r\n                ref={hiddenFileInput}\r\n                type=\"file\"\r\n                accept={getAcceptedFileTypes()}\r\n                onChange={handleFileInputChange}\r\n                className={props.customLook ? \"hidden\" : props.inputClassName + \" \" +\r\n                    (meta.touched && meta.error ? \" border-red-500 focus:border-red-500 focus:ring-red-500\"\r\n                        : \" border-gray-400 focus:border-sky-500 focus:ring-sky-500\")}\r\n            />\r\n            {meta.error &&\r\n                <div className=\"text-red-500 text-sm\">{meta.error}</div>\r\n            }\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface FileUploadProps {\r\n    name: string;\r\n    label: string;\r\n    labelClassName?: string;\r\n    inputClassName?: string;\r\n    containerClassName?: string;\r\n    customLook?: boolean\r\n    customSize?: string;\r\n    required?: boolean;\r\n    image?: boolean;\r\n    acceptedFileTypes?: string[];\r\n    fileValidation?: (file: File) => string | boolean;\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}