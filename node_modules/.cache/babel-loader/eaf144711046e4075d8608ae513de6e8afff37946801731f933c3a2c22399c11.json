{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\'NEO'\\\\Desktop\\\\tdp darbs\\\\Frontend\\\\frontend_dala\\\\src\\\\components\\\\forms\\\\AddWishForm.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { FormikForm } from \"./FormikForm\";\nimport { api } from \"../../config/request\";\nimport { useNavigate } from \"react-router-dom\";\nimport { wishValidationSchema as validationSchema } from \"../../helpers/validationHelpers\";\nimport { createItemErrors, processServerErrors } from \"../../config/serverErrors\";\nimport { WishFormBody } from \"./body/WishFormBody\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AddWishForm = props => {\n  _s();\n  const navigate = useNavigate();\n  const [generalError, setGeneralError] = React.useState(null);\n  const initialValues = {\n    name: '',\n    subtitle: '',\n    url: '',\n    price: '',\n    note: ''\n  };\n  const onSubmit = (values, actions) => {\n    if (props.hash === undefined) return;\n    const formData = new FormData();\n    for (const [key, value] of Object.entries(values)) {\n      formData.append(key, value);\n    }\n    api.post(`/wishlist/${props.hash}/item/create`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(res => {\n      actions.setSubmitting(false);\n      navigate(`/wishlist/${props.hash}`);\n    }).catch(err => {\n      const serverError = processServerErrors(err, actions, setGeneralError, createItemErrors);\n      if (!serverError) {\n        setGeneralError(createItemErrors['ITEM_ERROR'].msg);\n      }\n      actions.setSubmitting(false);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"px-80 mt-5\",\n    children: /*#__PURE__*/_jsxDEV(FormikForm, {\n      initialValues: initialValues,\n      validationSchema: validationSchema,\n      onSubmit: onSubmit,\n      submitText: \"Save to wishlist\",\n      submitClassName: \"my-5 cursor-pointer bg-sky-500 mx-auto block text-white font-semibold px-16 py-2 rounded-md hover:bg-sky-600 transition duration-200 focus:border-sky-600 focus:ring-sky-600 focus:outline-none focus:ring-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" bg-white border rounded p-10 grid grid-cols-2 gap-4\",\n        children: /*#__PURE__*/_jsxDEV(WishFormBody, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this), generalError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 text-red-500 text-center font-semibold\",\n        children: generalError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 34\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n_s(AddWishForm, \"8ucgcJp0aC4O+qG4uKUYLrKw76M=\", false, function () {\n  return [useNavigate];\n});\n_c = AddWishForm;\nvar _c;\n$RefreshReg$(_c, \"AddWishForm\");","map":{"version":3,"names":["React","FormikForm","api","useNavigate","wishValidationSchema","validationSchema","createItemErrors","processServerErrors","WishFormBody","AddWishForm","props","navigate","generalError","setGeneralError","useState","initialValues","name","subtitle","url","price","note","onSubmit","values","actions","hash","undefined","formData","FormData","key","value","Object","entries","append","post","headers","then","res","setSubmitting","catch","err","serverError","msg"],"sources":["C:/Users/'NEO'/Desktop/tdp darbs/Frontend/frontend_dala/src/components/forms/AddWishForm.tsx"],"sourcesContent":["import React from 'react';\r\nimport { FormikForm } from \"./FormikForm\";\r\nimport { api } from \"../../config/request\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { wishValidationSchema as validationSchema } from \"../../helpers/validationHelpers\";\r\nimport { createItemErrors, processServerErrors } from \"../../config/serverErrors\";\r\nimport { WishFormBody } from \"./body/WishFormBody\";\r\n\r\nexport const AddWishForm: React.FC<AddWishFormProps> = (props) => {\r\n    const navigate = useNavigate();\r\n    const [generalError, setGeneralError] = React.useState<string | null>(null);\r\n\r\n    const initialValues = {\r\n        name: '',\r\n        subtitle: '',\r\n        url: '',\r\n        price: '',\r\n        note: ''\r\n    }\r\n\r\n    const onSubmit = (values: any, actions: any) => {\r\n        if (props.hash === undefined) return;\r\n        const formData = new FormData();\r\n        for (const [key, value] of Object.entries(values)) {\r\n            formData.append(key, value as any);\r\n        }\r\n\r\n        api.post(`/wishlist/${props.hash}/item/create`, formData,\r\n            {headers: {'Content-Type': 'multipart/form-data'}\r\n        }).then((res) => {\r\n            actions.setSubmitting(false);\r\n            navigate(`/wishlist/${props.hash}`);\r\n        }).catch((err) => {\r\n            const serverError = processServerErrors(err, actions, setGeneralError, createItemErrors);\r\n            if (!serverError) {\r\n                setGeneralError(createItemErrors['ITEM_ERROR' as keyof typeof createItemErrors].msg);\r\n            }\r\n            actions.setSubmitting(false);\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div className=\"px-80 mt-5\">\r\n            <FormikForm\r\n                initialValues={initialValues}\r\n                validationSchema={validationSchema}\r\n                onSubmit={onSubmit}\r\n                submitText=\"Save to wishlist\"\r\n                submitClassName=\"my-5 cursor-pointer bg-sky-500 mx-auto block text-white font-semibold px-16 py-2 rounded-md hover:bg-sky-600 transition duration-200 focus:border-sky-600 focus:ring-sky-600 focus:outline-none focus:ring-2\"\r\n            >\r\n                    <div className=\" bg-white border rounded p-10 grid grid-cols-2 gap-4\">\r\n                        <WishFormBody />\r\n                    </div>\r\n                {generalError && <div className=\"mt-2 text-red-500 text-center font-semibold\">{generalError}</div>}\r\n            </FormikForm>\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface AddWishFormProps {\r\n    hash: string | undefined\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,cAAc;AACzC,SAASC,GAAG,QAAQ,sBAAsB;AAC1C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,oBAAoB,IAAIC,gBAAgB,QAAQ,iCAAiC;AAC1F,SAASC,gBAAgB,EAAEC,mBAAmB,QAAQ,2BAA2B;AACjF,SAASC,YAAY,QAAQ,qBAAqB;AAAC;AAEnD,OAAO,MAAMC,WAAuC,GAAIC,KAAK,IAAK;EAAA;EAC9D,MAAMC,QAAQ,GAAGR,WAAW,EAAE;EAC9B,MAAM,CAACS,YAAY,EAAEC,eAAe,CAAC,GAAGb,KAAK,CAACc,QAAQ,CAAgB,IAAI,CAAC;EAE3E,MAAMC,aAAa,GAAG;IAClBC,IAAI,EAAE,EAAE;IACRC,QAAQ,EAAE,EAAE;IACZC,GAAG,EAAE,EAAE;IACPC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE;EACV,CAAC;EAED,MAAMC,QAAQ,GAAG,CAACC,MAAW,EAAEC,OAAY,KAAK;IAC5C,IAAIb,KAAK,CAACc,IAAI,KAAKC,SAAS,EAAE;IAC9B,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/B,KAAK,MAAM,CAACC,GAAG,EAAEC,KAAK,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACT,MAAM,CAAC,EAAE;MAC/CI,QAAQ,CAACM,MAAM,CAACJ,GAAG,EAAEC,KAAK,CAAQ;IACtC;IAEA3B,GAAG,CAAC+B,IAAI,CAAE,aAAYvB,KAAK,CAACc,IAAK,cAAa,EAAEE,QAAQ,EACpD;MAACQ,OAAO,EAAE;QAAC,cAAc,EAAE;MAAqB;IACpD,CAAC,CAAC,CAACC,IAAI,CAAEC,GAAG,IAAK;MACbb,OAAO,CAACc,aAAa,CAAC,KAAK,CAAC;MAC5B1B,QAAQ,CAAE,aAAYD,KAAK,CAACc,IAAK,EAAC,CAAC;IACvC,CAAC,CAAC,CAACc,KAAK,CAAEC,GAAG,IAAK;MACd,MAAMC,WAAW,GAAGjC,mBAAmB,CAACgC,GAAG,EAAEhB,OAAO,EAAEV,eAAe,EAAEP,gBAAgB,CAAC;MACxF,IAAI,CAACkC,WAAW,EAAE;QACd3B,eAAe,CAACP,gBAAgB,CAAC,YAAY,CAAkC,CAACmC,GAAG,CAAC;MACxF;MACAlB,OAAO,CAACc,aAAa,CAAC,KAAK,CAAC;IAChC,CAAC,CAAC;EACN,CAAC;EAED,oBACI;IAAK,SAAS,EAAC,YAAY;IAAA,uBACvB,QAAC,UAAU;MACP,aAAa,EAAEtB,aAAc;MAC7B,gBAAgB,EAAEV,gBAAiB;MACnC,QAAQ,EAAEgB,QAAS;MACnB,UAAU,EAAC,kBAAkB;MAC7B,eAAe,EAAC,8MAA8M;MAAA,wBAE1N;QAAK,SAAS,EAAC,sDAAsD;QAAA,uBACjE,QAAC,YAAY;UAAA;UAAA;UAAA;QAAA;MAAG;QAAA;QAAA;QAAA;MAAA,QACd,EACTT,YAAY,iBAAI;QAAK,SAAS,EAAC,6CAA6C;QAAA,UAAEA;MAAY;QAAA;QAAA;QAAA;MAAA,QAAO;IAAA;MAAA;MAAA;MAAA;IAAA;EACzF;IAAA;IAAA;IAAA;EAAA,QACX;AAEd,CAAC;AAAC,GAjDWH,WAAuC;EAAA,QAC/BN,WAAW;AAAA;AAAA,KADnBM,WAAuC;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}